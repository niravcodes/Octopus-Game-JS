var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]};$jscomp.polyfill=function(a,b,d,c){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,c):$jscomp.polyfillUnisolated(a,b,d,c))};
$jscomp.polyfillUnisolated=function(a,b,d,c){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var f=a[c];f in d||(d[f]={});d=d[f]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,c){var f=a.split(".");a=1===f.length;c=f[0];c=!a&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var e=0;e<f.length-1;e++){var k=f[e];k in c||(c[k]={});c=c[k]}f=f[f.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?c[f]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:b}):b!==d&&($jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+f,f=$jscomp.propertyToPolyfillSymbol[f],
$jscomp.defineProperty(c,f,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,c=function(a){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(a||"")+"_"+d++,a)};return c},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<b.length;d++){var c=$jscomp.global[b[d]];"function"===typeof c&&"function"!=typeof c.prototype[a]&&$jscomp.defineProperty(c.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var d=0,c={next:function(){if(d<a.length){var f=d++;return{value:b(f,a[f]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.construct=function(){function a(){function a(){}new a;Reflect.construct(a,[],function(){});return new a instanceof a}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(a,c,f){a=b(a,c);f&&Reflect.setPrototypeOf(a,f.prototype);return a}}return function(a,b,f){void 0===f&&(f=a);f=$jscomp.objectCreate(f.prototype||Object.prototype);return Function.prototype.apply.call(a,f,b)||f}}();
$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var c=a.length,f=0;f<c;f++){var e=a[f];if(b.call(d,e,f,a))return{i:f,v:e}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.polyfill("Object.setPrototypeOf",function(a){return a||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,d,c){d=null!=d?d:function(a){return a};var b=[],e="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof e){a=e.call(a);for(var k=0;!(e=a.next()).done;)b.push(d.call(c,e.value,k++))}else for(e=a.length,k=0;k<e;k++)b.push(d.call(c,a[k],k));return b}},"es6","es3");
(function(){function a(b,d,c){function f(g,l){if(!d[g]){if(!b[g]){var h="function"==typeof require&&require;if(!l&&h)return h(g,!0);if(e)return e(g,!0);l=Error("Cannot find module '"+g+"'");throw l.code="MODULE_NOT_FOUND",l;}l=d[g]={exports:{}};b[g][0].call(l.exports,function(a){return f(b[g][1][a]||a)},l,l.exports,a,b,d,c)}return d[g].exports}for(var e="function"==typeof require&&require,k=0;k<c.length;k++)f(c[k]);return f}return a})()({1:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;a=new (b(a("../../library/background.js")).default)(["/assets/underwater-fantasy-files/PNG/layers/sand.png"]);a.parallaxFactor=.25;d.default=a},{"../../library/background.js":19,"@babel/runtime/helpers/interopRequireDefault":39}],2:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;a=new (b(a("../../library/background.js")).default)(["/assets/underwater-fantasy-files/PNG/layers/far.png"]);
a.parallaxFactor=.2;d.default=a},{"../../library/background.js":19,"@babel/runtime/helpers/interopRequireDefault":39}],3:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;a=new (b(a("../../library/background.js")).default)(["/assets/underwater-fantasy-files/PNG/layers/foreground-2.png","/assets/underwater-fantasy-files/PNG/layers/foreground-1.png"]);a.parallaxFactor=1;a.debugmode=!0;d.default=a},{"../../library/background.js":19,
"@babel/runtime/helpers/interopRequireDefault":39}],4:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=d.anotherFloor=void 0;b=c(a("../../library/character.js"));var f=c(a("../../library/collider.js")),e=c(a("../../library/spritesheet.js")),k=a("../../library/kinetics.js");c=c(a("./octopus.js"));var g=a("../../library/canvas.js");a=new b.default(new k.Kinetics(void 0,0,0),new f.default("floor",void 0,20*g.cw,40,0,0),
void 0,500,300,function(){this.motion.x=10*-g.cw;this.motion.y=g.ch-10});b=new b.default(new k.Kinetics(void 0,3*g.cw+400,340),new f.default("floor",void 0,200,40,200,20),new e.default("assets/platform1.png",1,{height:.5,width:1}),200,40);d.anotherFloor=b;c.default.registerCollisionWith(a.colliders[0]);c.default.registerCollisionWith(b.colliders[0]);d.default=a},{"../../library/canvas.js":21,"../../library/character.js":22,"../../library/collider.js":23,"../../library/kinetics.js":27,"../../library/spritesheet.js":30,
"./octopus.js":7,"@babel/runtime/helpers/interopRequireDefault":39}],5:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var f=c(a("./octopus.js"));b=c(a("../../library/character.js"));var e=a("../../library/kinetics.js"),k=c(a("../../library/collider.js")),g=c(a("../../library/spritesheet.js"));a=c(a("./floor.js"));var l=1,h=!1;b=new b.default(new e.Kinetics(function(){var a=f.default.motion;a.x>this.x+10?(h=
-1===l?!0:!1,this.x+=1,l=this.xdirection=1):a.x<this.x-10?(h=1===l?!0:!1,--this.x,l=this.xdirection=-1):h=!1;h&&(this.angle*=-1);a.y>this.y?this.y+=1:a.y<this.y&&--this.y;var b=0;this.y!==a.y&&(b=Math.atan((a.y-this.y)/(a.x-this.x)));Math.abs(b)>Math.PI/4&&Math.abs(b)<2*Math.PI?b=Math.sign(b)*Math.PI/4:Math.abs(b)>Math.PI/2&&Math.abs(b)<3*Math.PI/4&&(b=Math.sign(b)*Math.PI*3/4);this.angle=this.angle<b?this.angle+.01:this.angle-.01}),new k.default("fish",void 0,40,40,20,20),new g.default("assets/fishSprite.png",
16,{height:.5,width:.5}),110,100,function(){this.registerAnimation("eat",new g.default("assets/fishSpriteEat.png",10));this.motion.y=100;this.motion.x=300;this.runAnimation("base",!0,200);this.alreadyCollided=!1});f.default.registerCollisionWith(b.colliders[0]);b.registerCollisionWith(a.default.colliders[0]);b.registerCollisionWith(f.default.colliders[0]);b.collideActions.floor=function(a,b,c){b.resolveCollisionHard(c)};b.alreadyCollided=!1;b.collideActions.octopus=function(){var a=this;console.log("eat");
this.alreadyCollided||this.runAnimation("eat",!0,100,function(){a.alreadyCollided=!0});this.alreadyCollided=!0};d.default=b},{"../../library/character.js":22,"../../library/collider.js":23,"../../library/kinetics.js":27,"../../library/spritesheet.js":30,"./floor.js":4,"./octopus.js":7,"@babel/runtime/helpers/interopRequireDefault":39}],6:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=d.niravko=void 0;b=c(a("./octopus.js"));
var f=c(a("../../library/character.js")),e=a("../../library/kinetics.js"),k=c(a("../../library/collider.js"));c=c(a("../../library/spritesheet.js"));a=a("../../library/canvas.js");a=new f.default(new e.Kinetics(void 0,3*a.cw+1E3,a.ch-104),new k.default("niravko.com",void 0,100,208,50,104),new c.default("assets/balloonlast.png"),100,208);d.niravko=a;b.default.registerCollisionWith(a.colliders[0]);d.default=a},{"../../library/canvas.js":21,"../../library/character.js":22,"../../library/collider.js":23,
"../../library/kinetics.js":27,"../../library/spritesheet.js":30,"./octopus.js":7,"@babel/runtime/helpers/interopRequireDefault":39}],7:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;b=c(a("../../library/character.js"));var f=c(a("../../library/collider.js")),e=c(a("../../library/spritesheet.js")),k=a("../../library/kinetics.js"),g=a("../../library/canvas.js");a("../../library/constants.js");var l=c(a("../../library/events.js"));
a=c(a("../particles/bubbles.js"));var h=new b.default(new k.PhysicsKinetics,new f.default("octopus",void 0,40,40,20,20),new e.default("assets/octoAnimOneWhite.png",12,{height:.5,width:.5}),100,100,function(){this.lastCollision="none";this.motion.reset();this.motion.x=g.cw/2;this.motion.y=g.ch/3;this.runAnimation("idle",!0,200)},function(){this.bubbleEmitter.dismantle()});d.default=h;h.bubbleEmitter=a.default;h.bubbleEmitter.motion=h.motion;h.registerAnimation("walk",new e.default("assets/octopusWalkWhite.png",
8));h.registerAnimation("sit",new e.default("assets/idleOctopusWalk.png",2));h.registerAnimation("idle",new e.default("assets/idleOctopusWhite.png",6));h.onFloor=!1;h.megaThrustAvailable=!0;h.thrusting=!1;h.thrust=function(){var a=this;if(!this.thrusting){this.thrusting=!0;this.runAnimation("base",!1,90,function(){return a.runAnimation("idle",!0,200)});var b=this.onFloor;window.setTimeout(function(){a.bubbleEmitter.emit();var c=b?0:a.motion.angle;a.motion.angle=c;a.motion.applyAcceleration(3,void 0,
void 0,c)},180);window.setTimeout(function(){var c=b?0:a.motion.angle;a.onFloor||a.motion.applyAcceleration(16,void 0,void 0,c);window.setTimeout(function(){return a.bubbleEmitter.emit()},100);window.setTimeout(function(){console.log("thrusting not");a.thrusting=!1},400)},560)}};h.turn=function(a){var b=g.cw/2;this.onFloor?this.motion.angle=0:(a=(a.offsetX+b/2)%b/b,0<=a&&1>=a&&(this.motion.angle=-a*Math.PI*2+Math.PI),this.motion.xdirection=.5<a?-1:1)};var m=!1;h.move=function(a){var b=this;if(this.onFloor){var c=
1;this.motion.xdirection=-1;"left"==a&&(this.motion.xdirection=1,c=-1);this.motion.vx=c;if(!1===m)return m=!0,this.runAnimation("walk",!0),function(){m=!1;b.onFloor&&b.runAnimation("sit")}}};h.collideActions.NO_COLLISIONS=function(){this.onFloor&&(console.log("base"),this.thrusting||this.runAnimation("idle",!0,200),this.onFloor=!1)};h.collideActions.floor=function(a,b,c){b.resolveCollisionHard(c,a);2==a&&(this.onFloor||(console.log("sit"),this.runAnimation("sit",!0,500),this.motion.angle=0),this.onFloor=
!0)};h.collideActions.fish=function(a,b,c){"level2"===sceneManager.curScene.name&&"fish"!==this.lastCollision&&(this.pause(),setTimeout(function(){window.sceneManager.gotoScene("gameOver")},900),this.lastCollision="fish")};h.collideActions.vortex=function(){var a=this;"level1"===sceneManager.curScene.name&&"vortex"!==this.lastCollision&&(this.hide(),setTimeout(function(){a.pause()},300),setTimeout(function(){window.sceneManager.gotoScene("level2")},1200),this.lastCollision="vortex")};h.collideActions.powerup=
function(){var a=this;"level2"===sceneManager.curScene.name&&(setTimeout(function(){a.pause()},500),window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ")};h.collideActions["niravko.com"]=function(){var a=this;"level2"===sceneManager.curScene.name&&(setTimeout(function(){a.pause()},500),window.location.href="https://niravko.com/")};d=new l.default;d.subscribe(h,[{code:"Space",cb:function(){return h.thrust}},{code:"KeyD",cb:function(){return h.move("right")}},{code:"KeyA",cb:function(){return h.move("left")}},
{code:"KeyZ",cb:function(){return h.thrust(!0)}}]);d.subscribe(void 0,[{code:"Escape",cb:function(){return sceneManager.gotoScene("title")}}]);d.subscribeMouse(h,h.turn,"move");h.registerEvent(d)},{"../../library/canvas.js":21,"../../library/character.js":22,"../../library/collider.js":23,"../../library/constants.js":24,"../../library/events.js":26,"../../library/kinetics.js":27,"../../library/spritesheet.js":30,"../particles/bubbles.js":16,"@babel/runtime/helpers/interopRequireDefault":39}],8:[function(a,
b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=d.powerup=void 0;b=c(a("./octopus.js"));var f=c(a("../../library/character.js")),e=a("../../library/kinetics.js"),k=c(a("../../library/collider.js"));c=c(a("../../library/spritesheet.js"));a=a("../../library/canvas.js");a=new f.default(new e.Kinetics(void 0,3*a.cw+300,a.ch-40),new k.default("powerup",void 0,64,40,32,12),new c.default("assets/treasure.png"),64,64);d.powerup=a;b.default.registerCollisionWith(a.colliders[0]);
d.default=a},{"../../library/canvas.js":21,"../../library/character.js":22,"../../library/collider.js":23,"../../library/kinetics.js":27,"../../library/spritesheet.js":30,"./octopus.js":7,"@babel/runtime/helpers/interopRequireDefault":39}],9:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.vortexFG=d.vortex=void 0;b=c(a("../../library/character.js"));var f=c(a("../../library/collider.js")),e=c(a("../../library/spritesheet.js")),
k=c(a("./octopus.js"));c=a("../../library/kinetics.js");a=new b.default(new c.Kinetics,new f.default("vortex",void 0,20,100,0,50),new e.default("assets/vortexSpriteT.png",9,{height:.5,width:.5}),200,200,function(){this.motion.x=5E3;this.motion.y=350;this.runAnimation("base",!0,100)});d.vortex=a;a.registerCollider(new f.default("vortexField",void 0,200,100,200,50));a.registerCollisionWith(k.default.colliders[0]);k.default.registerCollisionWith(a.colliders[0]);b=new b.default(new c.Kinetics,void 0,
new e.default("assets/vortexSpriteFGT.png",9,{height:.5,width:.5}),80,200,function(){this.motion.x=5060;this.motion.y=350});d.vortexFG=b;b.baseAnimation.startAnim(100);var g=void 0,l=void 0;a.collideActions.octopus=function(a,b,c){"vortex"!==b.name&&"vortexField"===b.name&&(a=(b.motion.y-c.motion.y)/(b.motion.x-c.motion.x+1E-5)+Math.PI/2,a=Math.atan(a)+Math.PI/4,c.motion.angle=c.motion.angle>a?c.motion.angle-.15:c.motion.angle+.15,k.default.motion.applyAcceleration(.9,1,1,a),this.unregisterDebugAnnotation(g),
this.unregisterDebugAnnotation(l),g=this.registerDebugAnnotation({type:"line",x2:b.motion.x,y2:b.motion.y,x1:c.motion.x,y1:c.motion.y}),l=this.registerDebugAnnotation({type:"text",x:b.motion.x,y:b.motion.y,text:180*a/Math.PI}))};a.collideActions.NO_COLLISIONS=function(){this.unregisterDebugAnnotation(g);this.unregisterDebugAnnotation(l);l=g=void 0}},{"../../library/character.js":22,"../../library/collider.js":23,"../../library/kinetics.js":27,"../../library/spritesheet.js":30,"./octopus.js":7,"@babel/runtime/helpers/interopRequireDefault":39}],
10:[function(a,b,d){function c(){"title"===h.curScene.name?(0,e.clearCanvas)("#142d4d"):(0,e.clearCanvas)("#b6e7f0");h.nextStep();requestAnimationFrame(c)}var f=a("@babel/runtime/helpers/interopRequireDefault");b=f(a("../library/sceneManager.js"));var e=a("../library/canvas.js");d=f(a("./levels/level1.js"));var k=f(a("./levels/level2.js")),g=f(a("./levels/title.js")),l=f(a("./levels/help.js"));a=f(a("./levels/gameOver.js"));window.DEBUGMODE=!1;var h=window.sceneManager=new b.default;h.register("title",
g.default);h.register("level1",d.default);h.register("level2",k.default);h.register("help",l.default);h.register("gameOver",a.default);window.bgMusic=new Audio("assets/mozartClarinet.mp3");window.onload=c},{"../library/canvas.js":21,"../library/sceneManager.js":29,"./levels/gameOver.js":11,"./levels/help.js":12,"./levels/level1.js":13,"./levels/level2.js":14,"./levels/title.js":15,"@babel/runtime/helpers/interopRequireDefault":39}],11:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var f=c(a("../../library/SimpleText.js")),e=c(a("../../library/character.js")),k=c(a("../../library/spritesheet.js")),g=c(a("../../library/scene.js"));b=c(a("../../library/events.js"));var l=a("../../library/kinetics.js");c=c(a("../../library/camera.js"));a=a("../../library/canvas.js");c=new c.default(a.cw,a.ch);k=new e.default(new l.Kinetics(void 0,a.cw/2+20,200),void 0,new k.default("assets/title.png"),364,164);var h=new e.default(new l.Kinetics(void 0,
a.cw/2,380),void 0,new f.default("Game Over","Economica","#ff6a4f",""),40,200);f=new e.default(new l.Kinetics(void 0,a.cw/2,440),void 0,new f.default("> Play Again <","Economica","#ff6a4f","bold"),40,200);c.registerChar(k);c.registerChar(h);c.registerChar(f);g=new g.default(c);b=new b.default;b.subscribe(void 0,[{code:"Enter",cb:function(){return sceneManager.gotoScene("title")}}]);g.keyboard=b;d.default=g},{"../../library/SimpleText.js":17,"../../library/camera.js":20,"../../library/canvas.js":21,
"../../library/character.js":22,"../../library/events.js":26,"../../library/kinetics.js":27,"../../library/scene.js":28,"../../library/spritesheet.js":30,"@babel/runtime/helpers/interopRequireDefault":39}],12:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var f=c(a("../../library/SimpleText.js")),e=c(a("../../library/character.js")),k=c(a("../../library/spritesheet.js")),g=c(a("../../library/scene.js"));b=
c(a("../../library/events.js"));var l=a("../../library/kinetics.js");c=c(a("../../library/camera.js"));a=a("../../library/canvas.js");c=new c.default(a.cw,a.ch);k=new e.default(new l.Kinetics(void 0,a.cw/2+20,200),void 0,new k.default("assets/title.png"),364,164);var h=new e.default(new l.Kinetics(void 0,a.cw/2,340),void 0,new f.default("Help","Economica","#ff6a4f","bold"),40,200),m=new e.default(new l.Kinetics(void 0,a.cw/2,400),void 0,new f.default("Use Mouse to turn Octopus","Economica","#ff6a4f",
""),40,600),n=new e.default(new l.Kinetics(void 0,a.cw/2,440),void 0,new f.default("Press Space to propel forward","Economica","#ff6a4f",""),40,600),r=new e.default(new l.Kinetics(void 0,a.cw/2,480),void 0,new f.default("Press Z to propel harder","Economica","#ff6a4f",""),40,600);f=new e.default(new l.Kinetics(void 0,a.cw/2,540),void 0,new f.default("> Back <","Economica","#ff6a4f","bold"),40,300);c.registerChar(k);c.registerChar(h);c.registerChar(m);c.registerChar(n);c.registerChar(r);c.registerChar(f);
g=new g.default(c);b=new b.default;b.subscribe(void 0,[{code:"Enter",cb:function(){return sceneManager.gotoScene("title")}}]);g.keyboard=b;d.default=g},{"../../library/SimpleText.js":17,"../../library/camera.js":20,"../../library/canvas.js":21,"../../library/character.js":22,"../../library/events.js":26,"../../library/kinetics.js":27,"../../library/scene.js":28,"../../library/spritesheet.js":30,"@babel/runtime/helpers/interopRequireDefault":39}],13:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireWildcard"),
f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var e=f(a("../../library/camera.js"));b=f(a("../../library/scene.js"));var k=a("../../library/canvas.js"),g=f(a("../characters/octopus.js")),l=c(a("../characters/floor.js"));f(a("../characters/followFish.js"));var h=a("../characters/vortex.js");c=f(a("../backgrounds/midBG.js"));var m=f(a("../backgrounds/backBG.js"));f(a("../backgrounds/lastBG.js"));f(a("../../library/character.js"));
a("../../library/kinetics.js");f(a("../../library/SimpleText.js"));var n=a("../../library/StaticRenderables.js");a=new e.default(k.cw,k.ch,50,50,g.default,void 0);a.followDirection="x";a=new b.default(a);a.startingCondition=function(){this.register(l.default);this.register(l.anotherFloor);this.register(h.vortex);this.register(g.default);var a=new n.StaticText("Use mouse to turn me and space to propel",k.cw/2,340,"Economica","#ff6a4f","",40),b=new n.StaticText("Getting the hang of it? Great!",3*k.cw/
2,340,"Economica","#ff6a4f","",40),c=new n.StaticText("If on land use A and D to walk.",3*k.cw,340,"Economica","#ff6a4f","",40);this.register(a);this.register(b);this.register(c);this.register(h.vortexFG)};a.registerBG(m.default);a.registerFG(c.default);d.default=a},{"../../library/SimpleText.js":17,"../../library/StaticRenderables.js":18,"../../library/camera.js":20,"../../library/canvas.js":21,"../../library/character.js":22,"../../library/kinetics.js":27,"../../library/scene.js":28,"../backgrounds/backBG.js":1,
"../backgrounds/lastBG.js":2,"../backgrounds/midBG.js":3,"../characters/floor.js":4,"../characters/followFish.js":5,"../characters/octopus.js":7,"../characters/vortex.js":9,"@babel/runtime/helpers/interopRequireDefault":39,"@babel/runtime/helpers/interopRequireWildcard":40}],14:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var f=c(a("../../library/camera.js"));b=c(a("../../library/scene.js"));var e=a("../../library/canvas.js"),
k=c(a("../characters/octopus.js")),g=c(a("../characters/floor.js")),l=c(a("../characters/followFish.js")),h=a("../characters/vortex.js");c(a("../../library/character.js"));a("../../library/kinetics.js");c(a("../../library/SimpleText.js"));var m=a("../../library/StaticRenderables.js"),n=c(a("../characters/powerup.js")),r=c(a("../characters/niravko.js"));a=new f.default(e.cw,e.ch,50,50,k.default,void 0);a.followDirection="x";a=new b.default(a);a.startingCondition=function(){this.register(g.default);
this.register(h.vortex);this.register(k.default);this.register(n.default);this.register(r.default);this.register(l.default);var a=new m.StaticText("I don't want to work on this anymore.",e.cw/2,340,"Economica","#ff6a4f","",40),b=new m.StaticText("Send words of encouragement at nirav.com.np",3*e.cw/2,340,"Economica","#ff6a4f","",40),c=new m.StaticText("Keep running. Maybe you'll find something ...",5*e.cw/2,340,"Economica","#ff6a4f","",40);this.register(a);this.register(b);this.register(c);this.register(h.vortexFG)};
d.default=a},{"../../library/SimpleText.js":17,"../../library/StaticRenderables.js":18,"../../library/camera.js":20,"../../library/canvas.js":21,"../../library/character.js":22,"../../library/kinetics.js":27,"../../library/scene.js":28,"../characters/floor.js":4,"../characters/followFish.js":5,"../characters/niravko.js":6,"../characters/octopus.js":7,"../characters/powerup.js":8,"../characters/vortex.js":9,"@babel/runtime/helpers/interopRequireDefault":39}],15:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var f=c(a("../../library/scene.js"));b=c(a("../../library/events.js"));var e=a("../../library/StaticRenderables.js");c=c(a("../../library/camera.js"));a=a("../../library/canvas.js");c=new c.default(a.cw,a.ch);var k=(0,e.StaticTextGeneratorGenerator)("Economica","#ff6a4f","bold",40),g=[k("Filled",a.cw/2,380),k("up",a.cw/2,430),k("later",a.cw/2,480)];e=new e.StaticImage("assets/title.png",a.cw/2+20,200);c.registerChar(e);c.registerChar(g[0]);
c.registerChar(g[1]);c.registerChar(g[2]);f=new f.default(c);var l={words:["Play Game","Sound Off","Help"],selected:0,sound:!1,onNext:function(){this.selected=(this.selected+1)%this.words.length;this.update()},onPrev:function(){this.selected=(this.selected+this.words.length-1)%this.words.length;this.update()},update:function(){var a=this;g.forEach(function(b,c){a.selected===c?(b.setText("> "+a.words[c]+" <"),b.setProperty("bold")):(b.setText(a.words[c]),b.setProperty(""))})},activate:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];void 0!==a[this.selected]&&a[this.selected].bind(this)()},soundToggle:function(){this.sound=!this.sound;this.words[1]=this.sound?"Sound On":"Sound Off";this.update()}};l.update();b=new b.default;b.subscribe(l,[{code:"ArrowUp",cb:l.onPrev},{code:"ArrowDown",cb:l.onNext},{code:"Enter",cb:function(){return l.activate([function(){return sceneManager.gotoScene("level1")},function(){l.soundToggle();this.sound?bgMusic.play():bgMusic.pause()},function(){return sceneManager.gotoScene("help")}])}}]);
f.keyboard=b;d.default=f},{"../../library/StaticRenderables.js":18,"../../library/camera.js":20,"../../library/canvas.js":21,"../../library/events.js":26,"../../library/scene.js":28,"@babel/runtime/helpers/interopRequireDefault":39}],16:[function(a,b,d){var c=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;b=c(a("../../library/emitter.js"));var f=a("../../library/kinetics.js"),e=c(a("../../library/collider.js"));a=c(a("../../library/spritesheet.js"));
a=new b.default(void 0,[{motion:new f.PhysicsKinetics(-.07),sprite:new a.default("/assets/bubble.png",10),collider:new e.default,width:40,height:40,init:void 0,afterFn:function(a){a.runAnimation("base",!1,90,void 0,!1);a.motion.applyAcceleration(3*Math.random(),1,1,6*Math.random())}},{motion:new f.Kinetics(function(){--this.y;var a=Math.random();.7<a?this.x+=1:.3>a&&--this.x}),sprite:new a.default("/assets/bubbleBig.png",14),collider:new e.default,width:40,height:40,init:void 0,afterFn:function(a){a.runAnimation("base",
!1,90,!1)}}],1209,{min:1,max:5});d.default=a},{"../../library/collider.js":23,"../../library/emitter.js":25,"../../library/kinetics.js":27,"../../library/spritesheet.js":30,"@babel/runtime/helpers/interopRequireDefault":39}],17:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/defineProperty")),e=a("./canvas.js");d.default=function m(a,
b,d){var h=this,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",l=4<arguments.length?arguments[4]:void 0;(0,c.default)(this,m);(0,f.default)(this,"text","");(0,f.default)(this,"font","");(0,f.default)(this,"color","");(0,f.default)(this,"property","");(0,f.default)(this,"size",void 0);(0,f.default)(this,"maxWidth",500);(0,f.default)(this,"draw",function(a,b){var c,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,g=4<
arguments.length&&void 0!==arguments[4]?arguments[4]:1,l=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,n=6<arguments.length?arguments[6]:void 0;n=null!==(c=n)&&void 0!==c?c:h.maxWidth;void 0===l&&(l=void 0===h.size?20:h.size);e.cc.save();e.cc.translate(a,b);0!==d&&e.cc.rotate(d);1!==f&&1!==g&&e.cc.scale(f,g);e.cc.font=h.property+" "+l+"px "+h.font;e.cc.fillStyle=h.color;e.cc.fillText(h.text,-e.cc.measureText(h.text).width/2,0,n);e.cc.restore()});this.text=a;this.font=b;d&&(this.color=
d);this.property=g;this.size=l}},{"./canvas.js":21,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],18:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.StaticTextGeneratorGenerator=function(a,b,c,d){return function(e,h,f){return new l(e,h,f,a,b,c,d)}};d.StaticText=d.StaticImage=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/createClass")),
e=b(a("@babel/runtime/helpers/defineProperty")),k=b(a("./spritesheet.js")),g=b(a("./SimpleText.js"));a=function(){function a(b,d,h){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;(0,c.default)(this,a);(0,e.default)(this,"img",k.default);(0,e.default)(this,"x",void 0);(0,e.default)(this,"y",void 0);(0,e.default)(this,"height",void 0);(0,e.default)(this,"width",void 0);void 0!==b&&(this.img=new k.default(b),this.x=
d,this.y=h,this.height=f,this.width=l)}(0,f.default)(a,[{key:"draw",value:function(a,b){this.img.draw(this.x+a,this.y+b,0,1,1,this.width,this.height)}}]);return a}();d.StaticImage=a;var l=function(){function a(b,d,h,f,l){var n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"",k=6<arguments.length?arguments[6]:void 0;(0,c.default)(this,a);(0,e.default)(this,"text",g.default);(0,e.default)(this,"x",void 0);(0,e.default)(this,"y",void 0);(0,e.default)(this,"font",void 0);(0,e.default)(this,"text",
g.default);this.text=new g.default(b,f,l,n,k);this.x=d;this.y=h}(0,f.default)(a,[{key:"init",value:function(){}},{key:"nextStep",value:function(){}},{key:"dismantle",value:function(){}},{key:"setText",value:function(a){this.text.text=a}},{key:"setProperty",value:function(a){this.text.property=a}},{key:"draw",value:function(a,b){this.text.draw(this.x+a,this.y+b)}}]);return a}();d.StaticText=l},{"./SimpleText.js":17,"./spritesheet.js":30,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,
"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],19:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/slicedToArray")),f=b(a("@babel/runtime/helpers/classCallCheck")),e=b(a("@babel/runtime/helpers/createClass")),k=b(a("@babel/runtime/helpers/defineProperty")),g=a("./canvas.js");a=function(){function a(b,c,d,e,l){var h=this;(0,f.default)(this,
a);(0,k.default)(this,"images",[]);(0,k.default)(this,"bgStack",[]);(0,k.default)(this,"parallaxFactor",.2);(0,k.default)(this,"scale",1);(0,k.default)(this,"debugmode",!1);(0,k.default)(this,"nImgsLoaded",0);(0,k.default)(this,"allImgsLoaded",!1);(0,k.default)(this,"indexRight",0);(0,k.default)(this,"indexLeft",0);void 0!==b&&(b.forEach(function(a){var b=new Image;b.src=a;b.onload=function(){h.nImgsLoaded+=1;h.nImgsLoaded===h.images.length&&(h.allImgsLoaded=!0)};h.images.push(b)}),this.x=void 0===
c?0:c,this.y=void 0===d?0:d,this.motionFunc=void 0===e?void 0:e,void 0!==l&&(this.parallaxFactor=l))}(0,e.default)(a,[{key:"populateBgStack",value:function(){var a=0;if(this.allImgsLoaded)for(var b=0;b<=g.cw;){var c=this.images[a++%this.images.length];this.bgStack.push({img:c,x:b,y:"whatever"});b+=c.width*this.scale}}},{key:"setScale",value:function(){this.scale=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.populateBgStack()}},{key:"nextIndex",value:function(a){if(void 0===a)return 0;
if("left"===a)return 0>this.indexLeft&&(this.indexLeft=0),this.indexLeft++%this.images.length;if("right"===a)return 0>this.indexRight&&(this.indexRight=0),this.indexRight++%this.images.length}},{key:"decIndex",value:function(a){if(void 0===a)return 0;"left"===a?(--this.indexLeft,0>this.indexLeft&&(this.indexLeft=0)):"right"===a&&(--this.indexRight,0>this.indexRight&&(this.indexRight=0))}},{key:"draw",value:function(a,b){var d=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;if(void 0!==
this.motionFunc){var h=this.motionFunc();h=(0,c.default)(h,2);a=h[0];b=h[1]}e!==this.scale&&this.setScale(e);0===this.bgStack.length&&this.populateBgStack();a*=this.parallaxFactor;b*=this.parallaxFactor;h=this.bgStack[this.bgStack.length-1];var f=h.img.width*e;h.x+f<a+g.cw?this.bgStack.push({img:this.images[this.nextIndex("right")],x:h.x+f,y:"whatever"}):h.x>a+g.cw&&(this.decIndex("right"),this.bgStack.pop());h=this.bgStack[0];f=h.img.width*e;a>h.x+f?(this.decIndex("left"),this.bgStack.shift()):h.x>
a&&this.bgStack.unshift({img:this.images[this.nextIndex("left")],x:h.x-f,y:"dontcare"});this.bgStack.forEach(function(b){var c=b.img;void 0!==c&&(g.cc.save(),g.cc.translate(b.x-a-d.x,g.ch-c.height*e-d.y),g.cc.scale(e,e),g.cc.drawImage(c,0,0,c.width,c.height),g.cc.restore())})}}]);return a}();d.default=a},{"./canvas.js":21,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39,"@babel/runtime/helpers/slicedToArray":45}],
20:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/createClass")),e=b(a("@babel/runtime/helpers/defineProperty")),k=b(a("./character.js"));a=function(){function a(b,d){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,l=4<arguments.length&&void 0!==arguments[4]?
arguments[4]:void 0,g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,t=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0;(0,c.default)(this,a);(0,e.default)(this,"elements",[]);(0,e.default)(this,"offsetX",0);(0,e.default)(this,"offsetY",0);(0,e.default)(this,"frameWidth",void 0);(0,e.default)(this,"frameHeight",void 0);(0,e.default)(this,"follow",k.default);(0,e.default)(this,"followSpeed",void 0);(0,e.default)(this,"followDirection","xy");(0,e.default)(this,"cameraMotion",
void 0);(0,e.default)(this,"x",void 0);(0,e.default)(this,"y",void 0);(0,e.default)(this,"backgrounds",[]);(0,e.default)(this,"foregrounds",[]);this.frameWidth=b;this.frameHeight=d;this.follow=l;this.x=h;this.y=f;this.cameraMotion=g;this.followSpeed=t;this.init=function(){this.x=h;this.y=f}}(0,f.default)(a,[{key:"dismantle",value:function(){this.elements=[]}},{key:"registerChar",value:function(a){this.elements.push(a);return this.elements.length-1}},{key:"unregisterChar",value:function(a){delete this.elements[a]}},
{key:"withinBounds",value:function(a){return!0}},{key:"renderFrame",value:function(){var a=this;this.cameraMotion&&this.cameraMotion();if(this.follow){if("x"===this.followDirection||"xy"===this.followDirection)this.follow.motion.x-this.x>2*this.frameWidth/3?this.x=0<this.followSpeed?this.x+this.followSpeed:this.x+this.follow.motion.vx:this.follow.motion.x-this.x<this.frameWidth/3&&(this.x=0<this.followSpeed?this.x-this.followSpeed:this.x+this.follow.motion.vx);if("y"===this.followDirection||"xy"===
this.followDirection)this.follow.motion.y-this.y>2/3*this.frameHeight?this.y=0<this.followSpeed?this.y+this.followSpeed:this.y+this.follow.motion.vy:this.follow.motion.y-this.y<this.frameHeight/3&&(this.y=0<this.followSpeed?this.y-this.followSpeed:this.y+this.follow.motion.vy)}this.backgrounds.forEach(function(b){b.draw(a.x,a.y)});this.elements.forEach(function(b){a.withinBounds(b.motion)&&(b===a.follow?(b.draw(-a.x,-a.y),DEBUGMODE&&(b.hasDebugAnnotations()&&b.debugDrawAnnotations(-a.x,-a.y),b.debugDrawCollider(-a.x,
-a.y))):(b.draw(-a.x,-a.y),DEBUGMODE&&(b.hasDebugAnnotations&&b.hasDebugAnnotations()&&b.debugDrawAnnotations(-a.x,-a.y),b.debugDrawCollider&&b.debugDrawCollider(-a.x,-a.y))))});this.foregrounds.forEach(function(b){b.draw(a.x,a.y)})}},{key:"registerBG",value:function(a){this.backgrounds.push(a)}},{key:"registerFG",value:function(a){this.foregrounds.push(a)}}]);return a}();d.default=a},{"./character.js":22,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,
"@babel/runtime/helpers/interopRequireDefault":39}],21:[function(a,b,d){Object.defineProperty(d,"__esModule",{value:!0});d.clearCanvas=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#000";c.save();c.fillStyle=a;c.fillRect(0,0,f,e);c.restore()};d.ch=d.cw=d.cc=d.canvas=void 0;a=document.getElementById("game");d.canvas=a;var c=a.getContext("2d");d.cc=c;c.imageSmoothingEnabled=!1;var f=a.clientWidth;d.cw=f;var e=a.clientHeight;d.ch=e},{}],22:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/createClass")),e=b(a("@babel/runtime/helpers/defineProperty")),k=a("./kinetics.js"),g=a("./canvas.js");b(a("./spritesheet.js"));a=function(){function a(b,d,f){var h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,g=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0,l=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,
n=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;(0,c.default)(this,a);(0,e.default)(this,"width",void 0);(0,e.default)(this,"height",void 0);(0,e.default)(this,"colliders",[]);(0,e.default)(this,"collidesWith",[]);(0,e.default)(this,"collideActions",[]);(0,e.default)(this,"animations",[]);(0,e.default)(this,"spriteOffset",{x:0,y:0});(0,e.default)(this,"baseAnimation",void 0);(0,e.default)(this,"motion",k.Kinetics);(0,e.default)(this,"initFn",void 0);(0,e.default)(this,"paused",!0);
(0,e.default)(this,"hidden",!1);(0,e.default)(this,"keyboard",void 0);(0,e.default)(this,"startingVariables",void 0);(0,e.default)(this,"animationRunning",!1);(0,e.default)(this,"debugAnnotations",[]);d&&(d.motion=b);this.motion=b;this.colliders[0]=d;this.baseAnimation=f;this.animations[0]=f;this.animations.base=f;this.width=h;this.height=g;void 0!==l&&(this.initFn=l.bind(this));void 0!==n&&(this.disinitFn=n.bind(this));this.startingVariables={x:b.x,y:b.y}}(0,f.default)(a,[{key:"registerCollider",
value:function(a){a&&void 0!==a&&(a.motion=this.motion,this.colliders.push(a))}},{key:"registerCollisionWith",value:function(a){this.collidesWith.push(a)}},{key:"registerAnimation",value:function(a,b){this.animations[a]=b}}]);(0,f.default)(a,[{key:"clone",value:function(){return new a(this.motion.clone(),this.colliders[0].clone(),this.baseAnimation.clone(),this.width,this.height)}},{key:"init",value:function(){this.unpause();this.unhide();this.motion.x=this.startingVariables.x;this.motion.y=this.startingVariables.y;
void 0!==this.initFn&&this.initFn()}},{key:"dismantle",value:function(){this.pause();void 0!==this.disinitFn&&this.disinitFn()}},{key:"nextStep",value:function(){this.paused||(this.motion.computePhysics(),this.checkCollisions())}},{key:"pause",value:function(){this.paused=!0;void 0!==this.keyboard&&this.keyboard.disarm()}},{key:"unpause",value:function(){this.paused=!1;void 0!==this.keyboard&&this.keyboard.arm()}},{key:"hide",value:function(){this.hidden=!0}},{key:"unhide",value:function(){this.hidden=
!1}},{key:"draw",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.hidden||void 0===this.baseAnimation||this.baseAnimation.draw(this.motion.x+a+this.spriteOffset.x,this.motion.y+b+this.spriteOffset.y,this.motion.angle,this.motion.xdirection,this.motion.ydirection,this.width,this.height)}},{key:"checkCollisions",value:function(){var a=this,b=!0;this.colliders.forEach(function(c){a.collidesWith.forEach(function(d){c.isColliding(d)&&
(b=!1,void 0!==a.collideActions[d.name]&&a.collideActions[d.name].bind(a)(c.collisionDirection(d),c,d))})});b&&this.collideActions.NO_COLLISIONS&&this.collideActions.NO_COLLISIONS.bind(this)()}},{key:"runAnimation",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"base",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100,d=3<arguments.length?arguments[3]:void 0,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!0;!1===(1<arguments.length&&void 0!==
arguments[1]?arguments[1]:!1)?(this.baseAnimation.disengage(),this.baseAnimation=this.animations[b],this.baseAnimation.engage(),this.baseAnimation.startAnimOneShot(c,function(){e&&a.baseAnimation.resetFrame();d&&d.bind(a)()})):(this.baseAnimation.disengage(),this.baseAnimation=this.animations[b],this.baseAnimation.engage(),this.baseAnimation.startAnim(c))}},{key:"stopAnimation",value:function(){this.baseAnimation.stopAnim()}},{key:"setSprite",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:"base";this.baseAnimation.resetFrame();this.baseAnimation=this.animations[a]}},{key:"registerEvent",value:function(a){this.keyboard=a;this.paused||this.keyboard.arm()}},{key:"debugDrawCollider",value:function(a,b){var c=this;this.colliders.forEach(function(d){void 0!==d&&(g.cc.save(),g.cc.fillStyle="rgba(0,0,0,0)",g.cc.lineWidth="1",g.cc.strokeStyle="white",g.cc.strokeRect(c.motion.x-d.offsetX+a,c.motion.y-d.offsetY+b,d.width,d.height),g.cc.fillStyle="white",g.cc.fillRect(c.motion.x+
a,c.motion.y+b,3,3),g.cc.fillStyle="red",g.cc.fillRect(c.motion.x+a,c.motion.y+b+3,3,3),g.cc.restore())})}},{key:"registerDebugAnnotation",value:function(a){return this.debugAnnotations.push(a)-1}},{key:"unregisterDebugAnnotation",value:function(a){void 0!==a&&delete this.debugAnnotations[a]}},{key:"hasDebugAnnotations",value:function(){return 0!==this.debugAnnotations.filter(function(a){return a}).length}},{key:"debugDrawAnnotations",value:function(a,b){g.cc.save();g.cc.strokeStyle="white";g.cc.fillStyle=
"white";this.debugAnnotations.forEach(function(c){"line"===c.type?(g.cc.beginPath(),g.cc.moveTo(c.x1+a,c.y1+b),g.cc.lineTo(c.x2+a,c.y2+b),g.cc.stroke()):"text"===c.type&&g.cc.fillText(c.text,c.x+a,c.y+b)});g.cc.restore()}}]);return a}();d.default=a},{"./canvas.js":21,"./kinetics.js":27,"./spritesheet.js":30,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],23:[function(a,
b,d){function c(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable}));c.push.apply(c,d)}return c}function f(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{};b%2?c(Object(d),!0).forEach(function(b){(0,g.default)(a,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):c(Object(d)).forEach(function(b){Object.defineProperty(a,
b,Object.getOwnPropertyDescriptor(d,b))})}return a}b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var e=b(a("@babel/runtime/helpers/classCallCheck")),k=b(a("@babel/runtime/helpers/createClass")),g=b(a("@babel/runtime/helpers/defineProperty")),l=a("./kinetics.js"),h=a("./constants.js");a=function(){function a(b,c,d,f,h,k){(0,e.default)(this,a);(0,g.default)(this,"name",String);(0,g.default)(this,"motion",l.Kinetics);(0,g.default)(this,
"width",void 0);(0,g.default)(this,"height",void 0);(0,g.default)(this,"offsetX",void 0);(0,g.default)(this,"offsetY",void 0);this.motion=c;this.width=d;this.height=f;this.offsetX=h;this.offsetY=k;this.name=b}(0,k.default)(a,[{key:"clone",value:function(a){void 0===a&&(a=this.motion.clone());return f(f({},this),{},{motion:a})}},{key:"isColliding",value:function(a){var b=this.motion.x-this.offsetX,c=this.motion.y-this.offsetY,d=this.width,e=this.height,f=a.motion.x-a.offsetX,g=a.motion.y-a.offsetY,
h=a.height;return b<f+a.width&&b+d>f&&c<g+h&&c+e>g?!0:!1}},{key:"collisionDirection",value:function(a){var b=this.motion.x-this.offsetX,c=this.motion.y-this.offsetY,d=this.width,e=this.height,f=a.motion.x-a.offsetX,g=a.motion.y-a.offsetY,h=a.width,l=[];l[0]=Math.abs(c-(g+a.height));l[1]=Math.abs(b+d-f);l[2]=Math.abs(c+e-g);l[3]=Math.abs(b-(f+h));var k=Math.min.apply(Math,l),n=0;l.forEach(function(a,b){a==k&&(n=b)});return n}},{key:"resolveCollisionLand",value:function(a,b){void 0===b&&(b=this.collisionDirection(a));
2==b?(this.motion.ay=0,this.motion.vy=0,this.motion.setY(a.motion.y-a.offsetY-(this.height-this.offsetY))):0==b?(this.motion.vy=0,this.motion.setY(a.motion.y-a.offsetY+a.height+this.offsetY)):3===b?this.motion.setX(a.motion.x-a.offsetX+a.width+this.offsetX):1==b&&this.motion.setX(a.motion.x-a.offsetX-this.offsetX)}},{key:"resolveCollisionHard",value:function(a,b){void 0===b&&(b=this.collisionDirection(a));2==b?(this.motion.ay=0,this.motion.vy=0,this.motion.setY(a.motion.y-a.offsetY-(this.height-this.offsetY))):
0==b?(this.motion.ay=h.physics.gravity,this.motion.vy=0,this.motion.setY(a.motion.y-a.offsetY+a.height+this.offsetY)):3===b?(this.motion.vx=0,this.motion.ax=1,this.motion.setX(a.motion.x-a.offsetX+a.width+this.offsetX)):1==b&&(this.motion.vx=0,this.motion.ax=-1,this.motion.setX(a.motion.x-a.offsetX-this.offsetX))}},{key:"resolveCollisionMoving",value:function(a){0==a.collisionDirection(this)?(this.motion.vx=1.25*a.motion.xdirection,this.motion.y=a.motion.y-this.height+14):2==a.collisionDirection(this)?
(this.motion.ay=h.physics.gravity,this.motion.vy=0,this.motion.y+=4):1==a.collisionDirection(this)?this.motion.x=a.motion.x+a.width+6:3==a.collisionDirection(this)&&(this.motion.x=a.motion.x-this.width)}}]);return a}();d.default=a},{"./constants.js":24,"./kinetics.js":27,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],24:[function(a,b,d){Object.defineProperty(d,"__esModule",
{value:!0});d.physics={gravity:.06,decayMotion:.79};d.frameRateMs=75},{}],25:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/createClass")),e=b(a("@babel/runtime/helpers/defineProperty")),k=b(a("./character.js"));a=function(){function a(b,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E3,g=3<arguments.length&&void 0!==
arguments[3]?arguments[3]:{min:1,max:3},h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{x:30,y:30};(0,c.default)(this,a);(0,e.default)(this,"motion",void 0);(0,e.default)(this,"particle",void 0);(0,e.default)(this,"decayTime",void 0);(0,e.default)(this,"curParticles",[]);this.motion=b;this.particle=d;this.decayTime=f;this.range=g;this.locationRange=h}(0,f.default)(a,[{key:"emit",value:function(){var a=this,b=this.range,c=this.locationRange;b=Math.floor(Math.random()*(b.max-b.min))+b.min;
for(var d=function(b){var d=Math.floor(Math.random()*c.x*2)-c.x,e=Math.floor(Math.random()*c.y*2)-c.y;b=a.particle[Math.floor(a.particle.length*Math.random())];void 0===b&&(console.log("the random indexing is producing out of range values prolly"),b=a.particle[0]);var f=b,g=f.collider,h=f.sprite,l=f.width,m=f.height,p=f.init;b=f.afterFn;f=f.motion.clone();f.x=a.motion.x+d;f.y=a.motion.y+e;d=void 0;void 0!==g&&(d=g.clone(f));e=h.clone();l=new k.default(f,d,e,l,m,p);var n=sceneManager.curScene.register(l);
b&&b(l);setTimeout(function(){sceneManager.curScene.unregister(n)},a.decayTime)},e=0;e<b;e++)d(e)}},{key:"dismantle",value:function(){}}]);return a}();d.default=a},{"./character.js":22,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],26:[function(a,b,d){function c(a){var b=f();return function(){var c=(0,g.default)(a);if(b){var d=(0,g.default)(this).constructor;c=Reflect.construct(c,
arguments,d)}else c=c.apply(this,arguments);return(0,k.default)(this,c)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var e=b(a("@babel/runtime/helpers/inherits")),k=b(a("@babel/runtime/helpers/possibleConstructorReturn")),
g=b(a("@babel/runtime/helpers/getPrototypeOf")),l=b(a("@babel/runtime/helpers/classCallCheck")),h=b(a("@babel/runtime/helpers/createClass")),m=b(a("@babel/runtime/helpers/defineProperty"));a=function(){function a(){var b=this;(0,l.default)(this,a);(0,m.default)(this,"subscribersKey",[]);(0,m.default)(this,"keyUpQueue",[]);(0,m.default)(this,"subscribersMouse",[]);(0,m.default)(this,"codesAlreadyRegistered",[]);(0,m.default)(this,"keyDown",function(a){b.subscribersKey.forEach(function(c){c.keyEvent.forEach(function(d){if(d.code==
a.code){a.preventDefault();var e=d.cb.bind(c.character)();void 0!==e&&void 0===b.codesAlreadyRegistered.find(function(a){return a===d.code})&&(b.keyUpQueue.push({code:d.code,cb:e,character:c.character}),b.codesAlreadyRegistered.push(d.code))}})})}.bind(this));(0,m.default)(this,"keyUp",function(a){b.keyUpQueue.forEach(function(c,d,e){a.code===c.code&&void 0!==c.cb&&(c.cb.bind(c.character)(a),e.splice(d,1),b.codesAlreadyRegistered=b.codesAlreadyRegistered.filter(function(b){return b!==a.code}))})}.bind(this));
(0,m.default)(this,"mouseMove",function(a){b.subscribersMouse.filter(function(a){return"move"==a.event}).forEach(function(b){return b.fn.bind(b.character)(a)})}.bind(this))}(0,h.default)(a,[{key:"arm",value:function(){window.addEventListener("keydown",this.keyDown);window.addEventListener("keyup",this.keyUp);window.addEventListener("mousemove",this.mouseMove)}},{key:"disarm",value:function(){window.removeEventListener("keydown",this.keyDown);window.removeEventListener("keyup",this.keyUp);window.removeEventListener("mousemove",
this.mouseMove)}},{key:"subscribe",value:function(a){this.subscribersKey.push({character:a,keyEvent:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]})}},{key:"subscribeMouse",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"move";"move"===c&&this.subscribersMouse.push({character:a,fn:b,event:c})}}]);return a}();d.default=a;(function(a){function b(){(0,l.default)(this,b);return d.apply(this,arguments)}(0,e.default)(b,a);var d=c(b);return b})(a);(function(a){function b(){(0,
l.default)(this,b);return d.apply(this,arguments)}(0,e.default)(b,a);var d=c(b);return b})(a)},{"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/getPrototypeOf":37,"@babel/runtime/helpers/inherits":38,"@babel/runtime/helpers/interopRequireDefault":39,"@babel/runtime/helpers/possibleConstructorReturn":43}],27:[function(a,b,d){function c(a){var b=f();return function(){var c=(0,m.default)(a);if(b){var d=
(0,m.default)(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return(0,h.default)(this,c)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function e(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,
b).enumerable}));c.push.apply(c,d)}return c}function k(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?e(Object(c),!0).forEach(function(b){(0,p.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});
d.PhysicsKineticsLand=d.PhysicsKinetics=d.Kinetics=void 0;var g=b(a("@babel/runtime/helpers/assertThisInitialized")),l=b(a("@babel/runtime/helpers/inherits")),h=b(a("@babel/runtime/helpers/possibleConstructorReturn")),m=b(a("@babel/runtime/helpers/getPrototypeOf")),n=b(a("@babel/runtime/helpers/classCallCheck")),r=b(a("@babel/runtime/helpers/createClass")),p=b(a("@babel/runtime/helpers/defineProperty")),t=a("./canvas.js"),q=a("./constants.js"),u=function(){function a(b){var c=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:50,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:50;(0,n.default)(this,a);(0,p.default)(this,"x",50);(0,p.default)(this,"y",50);(0,p.default)(this,"xdirection",1);(0,p.default)(this,"ydirection",1);(0,p.default)(this,"angle",0);(0,p.default)(this,"origMotionFunction",void 0);(0,p.default)(this,"motionFunction",void 0);(0,p.default)(this,"last",this);b&&(this.origMotionFunction=b,this.motionFunction=b.bind(this));this.x=c;this.y=d}(0,r.default)(a,[{key:"clone",
value:function(){return new a(this.origMotionFunction,this.x,this.y)}},{key:"computePhysics",value:function(){this.saveLast();void 0!==this.motionFunction&&this.motionFunction()}},{key:"reset",value:function(){this.y=this.x=50;this.ydirection=this.xdirection=1;this.angle=0;this.saveLast()}},{key:"saveLast",value:function(){this.last=k({},this)}},{key:"setX",value:function(a){this.saveLast();this.x=a}},{key:"setY",value:function(a){this.saveLast();this.y=a}}]);return a}();d.Kinetics=u;a=function(a){function b(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:q.physics.gravity;(0,n.default)(this,b);var c=d.call(this);(0,p.default)((0,g.default)(c),"angle",0);(0,p.default)((0,g.default)(c),"x",t.cw/2);(0,p.default)((0,g.default)(c),"y",t.ch/2);(0,p.default)((0,g.default)(c),"vx",0);(0,p.default)((0,g.default)(c),"vy",0);(0,p.default)((0,g.default)(c),"ax",0);(0,p.default)((0,g.default)(c),"ay",0);c.gravity=void 0!==a?a:q.physics.gravity;return c}(0,l.default)(b,a);var d=c(b);(0,r.default)(b,[{key:"clone",
value:function(){return new b(this.gravity)}},{key:"computePhysics",value:function(){this.saveLast();this.ay+=this.gravity;this.ay*=q.physics.decayMotion;this.ax*=q.physics.decayMotion;this.vy+=this.ay;this.vx+=this.ax;this.vy*=q.physics.decayMotion;this.vx*=q.physics.decayMotion;this.y+=this.vy;this.x+=this.vx}},{key:"applyAcceleration",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=3<arguments.length?
arguments[3]:void 0;void 0===d&&(d=this.angle);this.saveLast();this.ax+=b*a*Math.sin(d);this.ay-=c*a*Math.cos(d)}},{key:"reset",value:function(){u.prototype.reset();this.vx=this.vy=this.ay=this.ax=0}}]);return b}(u);d.PhysicsKinetics=a;a=function(a){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:q.physics.gravity;(0,n.default)(this,b);var c=d.call(this);(0,p.default)((0,g.default)(c),"angle",0);(0,p.default)((0,g.default)(c),"x",t.cw/2);(0,p.default)((0,g.default)(c),"y",
t.ch/2);(0,p.default)((0,g.default)(c),"vx",0);(0,p.default)((0,g.default)(c),"vy",0);(0,p.default)((0,g.default)(c),"ax",0);(0,p.default)((0,g.default)(c),"ay",0);c.gravity=void 0!==a?a:q.physics.gravity;return c}(0,l.default)(b,a);var d=c(b);(0,r.default)(b,[{key:"clone",value:function(){return new b(this.gravity)}},{key:"computePhysics",value:function(){this.saveLast();this.ay+=this.gravity;this.vy+=this.ay;this.vx+=this.ax;this.y+=this.vy;this.x+=this.vx}},{key:"applyAcceleration",value:function(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=3<arguments.length?arguments[3]:void 0;void 0===d&&(d=this.angle);this.saveLast();this.ax+=b*a*Math.sin(d);this.ay-=c*a*Math.cos(d)}},{key:"applyVelocity",value:function(a,b){void 0===b&&(b=this.angle);this.saveLast();this.vx+=a*Math.sin(b);this.vy-=a*Math.cos(b)}},{key:"reset",value:function(){u.prototype.reset();this.vx=this.vy=this.ay=this.ax=0}}]);return b}(u);d.PhysicsKineticsLand=
a},{"./canvas.js":21,"./constants.js":24,"@babel/runtime/helpers/assertThisInitialized":33,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/getPrototypeOf":37,"@babel/runtime/helpers/inherits":38,"@babel/runtime/helpers/interopRequireDefault":39,"@babel/runtime/helpers/possibleConstructorReturn":43}],28:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",
{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/createClass")),e=b(a("@babel/runtime/helpers/defineProperty")),k=b(a("./camera.js"));a=function(){function a(b){(0,c.default)(this,a);(0,e.default)(this,"characters",[]);(0,e.default)(this,"cam",k.default);(0,e.default)(this,"keyboard",void 0);(0,e.default)(this,"sceneIndexToCamIndex",[]);(0,e.default)(this,"backgrounds",[]);(0,e.default)(this,"foregrounds",[]);this.cam=b}(0,f.default)(a,
[{key:"initialize",value:function(){this.startingCondition&&this.startingCondition.bind(this)();this.cam.init();this.characters.forEach(function(a){a.init()});void 0!==this.keyboard&&this.keyboard.arm()}},{key:"dismantle",value:function(){var a=this;void 0!==this.keyboard&&this.keyboard.disarm();this.characters.forEach(function(b){a.cam.dismantle();b.dismantle()});this.characters=[]}},{key:"nextStep",value:function(){this.characters.forEach(function(a){a.nextStep()});this.cam.renderFrame()}},{key:"register",
value:function(a){a.init();this.characters.push(a);var b=this.characters.length-1;a=this.cam.registerChar(a);this.sceneIndexToCamIndex[b]=a;return b}},{key:"unregister",value:function(a){delete this.characters[a];this.cam.unregisterChar(this.sceneIndexToCamIndex[a])}},{key:"hasCharacter",value:function(a){return a.find(function(b){return b===a})?!0:!1}},{key:"registerBG",value:function(a){this.cam.registerBG(a)}},{key:"registerFG",value:function(a){this.cam.registerFG(a)}}]);return a}();d.default=
a},{"./camera.js":20,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],29:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),f=b(a("@babel/runtime/helpers/createClass")),e=b(a("@babel/runtime/helpers/defineProperty"));a=function(){function a(){(0,
c.default)(this,a);(0,e.default)(this,"curScene",void 0);(0,e.default)(this,"scenes",[])}(0,f.default)(a,[{key:"register",value:function(a,b){b.name=a;void 0===this.curScene&&(this.curScene=b,this.curScene.initialize());this.scenes.push({name:a,scene:b})}},{key:"gotoScene",value:function(a){var b=this.scenes.find(function(b){return b.name===a});void 0===b?console.log("No such Scene"):(this.curScene.dismantle(),this.curScene=b.scene,this.curScene.initialize())}},{key:"nextStep",value:function(){this.curScene&&
this.curScene.nextStep()}},{key:"restart",value:function(){this.curScene.dismantle();this.curScene.initialize()}}]);return a}();d.default=a},{"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],30:[function(a,b,d){b=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(d,"__esModule",{value:!0});d.CompositeSpritesheet=d.default=void 0;var c=b(a("@babel/runtime/helpers/classCallCheck")),
f=b(a("@babel/runtime/helpers/createClass")),e=b(a("@babel/runtime/helpers/defineProperty")),k=a("./constants.js"),g=a("./canvas.js");a=function(){function a(b){var d=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{height:.5,width:.5};(0,c.default)(this,a);(0,e.default)(this,"image",void 0);(0,e.default)(this,"sheetwidth",void 0);(0,e.default)(this,"sheetheight",void 0);(0,e.default)(this,"cols",void 0);(0,e.default)(this,"spritewidth",
void 0);(0,e.default)(this,"originFactor",void 0);(0,e.default)(this,"imageLoaded",!1);(0,e.default)(this,"draw",function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:void 0,k=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;void 0===h&&(h=d.image.width/d.cols);void 0===k&&(k=d.sheetheight);
a=Math.floor(a);b=Math.floor(b);void 0!==d.image&&(g.cc.save(),g.cc.translate(a,b),0!==c&&g.cc.rotate(c),1===e&&1===f||g.cc.scale(e,f),g.cc.drawImage(d.image,d.curFrame*d.spritewidth-1,0,d.spritewidth,d.sheetheight,-h*d.originFactor.width,-k*d.originFactor.height,h,k),g.cc.restore())});(0,e.default)(this,"curFrame",0);(0,e.default)(this,"animTimer",void 0);(0,e.default)(this,"alreadyAnimating",!1);(0,e.default)(this,"engaged",!1);(0,e.default)(this,"newFrame",function(){if(d.engaged){if(d.curFrame+
1>=d.cols)return"done";++d.curFrame}});(0,e.default)(this,"resetFrame",function(){d.curFrame=0}.bind(this));void 0!==b&&(this.image=new Image,this.image.src=b,this.cols=f,this.curFrame=0,this.originFactor=h,this.image.onload=function(){d.sheetwidth=d.image.width;d.sheetheight=d.image.height;d.spritewidth=d.sheetwidth/d.cols;d.imageLoaded=!0})}(0,f.default)(a,[{key:"clone",value:function(){if(this.imageLoaded){var b=new a;b.image=this.image;b.sheetheight=this.sheetheight;b.sheetwidth=this.sheetwidth;
b.spritewidth=this.spritewidth;b.originFactor=this.originFactor;b.cols=this.cols;return b}return new a(this.location,this.cols,this.originFactor)}},{key:"engage",value:function(){this.engaged=!0;this.resetFrame()}},{key:"disengage",value:function(){this.engaged=!1;this.resetFrame()}},{key:"startAnim",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:k.frameRateMs;this.engaged&&!this.alreadyAnimating&&(this.animTimer=setInterval(function(){"done"===a.newFrame()&&
a.resetFrame()},b),this.alreadyAnimating=!0)}},{key:"stopAnim",value:function(){clearInterval(this.animTimer);this.animTimer=void 0;this.resetFrame();this.alreadyAnimating=!1}},{key:"startAnimOneShot",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:k.frameRateMs,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;if(this.engaged&&!this.alreadyAnimating){this.alreadyAnimating=!0;var d=setInterval(function(){"done"===a.newFrame()&&(window.clearInterval(d),
a.alreadyAnimating=!1,c&&c())},b)}}},{key:"getSpriteWidth",value:function(){return this.image.width/this.cols}},{key:"getSpriteHeight",value:function(){return this.image.height}}]);return a}();d.default=a;a=function(){function a(){var b;(0,c.default)(this,a);(0,e.default)(this,"sprites",[]);(b=this.sprites).push.apply(b,arguments)}(0,f.default)(a,[{key:"draw",value:function(){var a=arguments;this.sprites.forEach(function(b){return b.draw.apply(b,a)})}}]);return a}();d.CompositeSpritesheet=a},{"./canvas.js":21,
"./constants.js":24,"@babel/runtime/helpers/classCallCheck":34,"@babel/runtime/helpers/createClass":35,"@babel/runtime/helpers/defineProperty":36,"@babel/runtime/helpers/interopRequireDefault":39}],31:[function(a,b,d){b.exports=function(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}},{}],32:[function(a,b,d){b.exports=function(a){if(Array.isArray(a))return a}},{}],33:[function(a,b,d){b.exports=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}},{}],34:[function(a,b,d){b.exports=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}},{}],35:[function(a,b,d){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}b.exports=function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}},{}],36:[function(a,b,d){b.exports=function(a,b,d){b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,
configurable:!0,writable:!0}):a[b]=d;return a}},{}],37:[function(a,b,d){function c(a){b.exports=c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return c(a)}b.exports=c},{}],38:[function(a,b,d){var c=a("./setPrototypeOf");b.exports=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});
b&&c(a,b)}},{"./setPrototypeOf":44}],39:[function(a,b,d){b.exports=function(a){return a&&a.__esModule?a:{"default":a}}},{}],40:[function(a,b,d){function c(){if("function"!==typeof WeakMap)return null;var a=new WeakMap;c=function(){return a};return a}var f=a("../helpers/typeof");b.exports=function(a){if(a&&a.__esModule)return a;if(null===a||"object"!==f(a)&&"function"!==typeof a)return{"default":a};var b=c();if(b&&b.has(a))return b.get(a);var d={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor,
h;for(h in a)if(Object.prototype.hasOwnProperty.call(a,h)){var m=e?Object.getOwnPropertyDescriptor(a,h):null;m&&(m.get||m.set)?Object.defineProperty(d,h,m):d[h]=a[h]}d["default"]=a;b&&b.set(a,d);return d}},{"../helpers/typeof":46}],41:[function(a,b,d){b.exports=function(a,b){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,f=!1,l=void 0;try{for(var h=a[Symbol.iterator](),m;!(d=(m=h.next()).done)&&(c.push(m.value),!b||c.length!==b);d=!0);}catch(n){f=!0,l=n}finally{try{if(!d&&
null!=h["return"])h["return"]()}finally{if(f)throw l;}}return c}}},{}],42:[function(a,b,d){b.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}},{}],43:[function(a,b,d){var c=a("../helpers/typeof"),f=a("./assertThisInitialized");b.exports=function(a,b){return!b||"object"!==c(b)&&"function"!==typeof b?f(a):b}},{"../helpers/typeof":46,"./assertThisInitialized":33}],44:[function(a,
b,d){function c(a,d){b.exports=c=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return c(a,d)}b.exports=c},{}],45:[function(a,b,d){var c=a("./arrayWithHoles"),f=a("./iterableToArrayLimit"),e=a("./unsupportedIterableToArray"),k=a("./nonIterableRest");b.exports=function(a,b){return c(a)||f(a,b)||e(a,b)||k()}},{"./arrayWithHoles":32,"./iterableToArrayLimit":41,"./nonIterableRest":42,"./unsupportedIterableToArray":47}],46:[function(a,b,d){function c(a){"@babel/helpers - typeof";b.exports=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?c=function(a){return typeof a}:c=function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return c(a)}b.exports=c},{}],47:[function(a,b,d){var c=a("./arrayLikeToArray");b.exports=function(a,b){if(a){if("string"===typeof a)return c(a,b);var d=Object.prototype.toString.call(a).slice(8,-1);"Object"===d&&a.constructor&&(d=a.constructor.name);if("Map"===d||"Set"===d)return Array.from(a);
if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return c(a,b)}}},{"./arrayLikeToArray":31}]},{},[10]);
